---
- name: Create curator config
  template:
    src: curator.yaml.j2
    dest: curator.yaml

- name: Update curator configmap
  oc_configmap:
    state: present
    name: "logging-curator"
    namespace: "{{ openshift_logging_namespace }}"
    from_file:
      config.yaml: "curator.yaml"

- name: Rollout curator deployment
  shell: >
    {{ oc }} -n {{ openshift_logging_namespace }}
    rollout latest dc/logging-curator

- name: Include tasks s3 conf
  import_tasks: logging-fluentd-s3.yml
  when: getupcloud_api_aws_access_key_id is defined


